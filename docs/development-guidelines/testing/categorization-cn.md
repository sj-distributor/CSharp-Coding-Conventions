

# 测试分类
- --

### **要** 以有用的粒度级别编写测试


测试中的“单元”应该是单个类、单个方法、单行代码吗？
与其关注教科书中关于“单元”的理想，不如关注两件事：

* 测试是否为我提供了有用的信息，无论是通过还是失败？
* 测试是否给了我改变的信心？

如果你的测试粒度太小，以至于它们零散，那就把它拉回到一个稍高的级别的测试粒度。如果它仍然提供有用的反馈和做出改变的信心，我们就不应该在意“这不是一个单元”。当然，这不是一个单位，但这样说没有用，因为它不会促使我们做出更好的决定。

### **避免** 围绕“单元”一词“争论定义”

开发人员很容易过于关注一个测试是否是“单元”测试，致力于编写符合教科书理想的测试，导致了测试提供很少甚至负面的价值。
人们会争论被测试的单元是否真的是一个单元，甚至会附加一个价值判断，如果一个测试符合或不符合理想的“单元”，那么它是好的还是坏的。
方法是一个单元吗？一个类？一行代码？一组密切相关的类？
在大多数情况下，这种精确的定义几乎没有什么价值。然而，区分单元测试和集成测试之间的差异通常是值得的。
单元测试是一种不会“退出进程”的测试。
如果正在运行的测试或测试对象（SUT）与外部系统（如数据库或文件系统）通信，则测试将退出进程。
如果测试只是简单地操作内存中的对象或执行计算，则测试仍在进程中。
那么，集成测试就是任何超出流程的测试。
如果您的测试或SUT触及文件系统、查询数据库、发送电子邮件、“POST”到正在运行的API……这是一个集成测试。



然而，再一次，我们并不真正关心这一点，尤其是在决定一个测试是否“好”的时候。为此，我们只需要关注两件事：
* 测试是否为我提供了有用的信息，无论是通过还是失败？
* 测试是否给了我改变的信心？
